<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Anoma Docs</title>
        <meta name="robots" content="noindex" />


        <!-- Custom HTML head -->
        
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="assets/custom.css">
        <link rel="stylesheet" href="assets/mdbook-admonish.css">

    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="index.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="quick-start.html"><strong aria-hidden="true">2.</strong> Quick Start</a></li><li class="chapter-item expanded "><a href="user-guide/index.html"><strong aria-hidden="true">3.</strong> User Guide</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="user-guide/install.html"><strong aria-hidden="true">3.1.</strong> Install</a></li><li class="chapter-item expanded "><a href="user-guide/getting-started.html"><strong aria-hidden="true">3.2.</strong> Getting started</a></li><li class="chapter-item expanded "><a href="user-guide/wallet.html"><strong aria-hidden="true">3.3.</strong> The Wallet</a></li><li class="chapter-item expanded "><a href="user-guide/ledger.html"><strong aria-hidden="true">3.4.</strong> The Ledger</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="user-guide/ledger/pos.html"><strong aria-hidden="true">3.4.1.</strong> Interact with PoS</a></li><li class="chapter-item expanded "><a href="user-guide/ledger/governance.html"><strong aria-hidden="true">3.4.2.</strong> Governance</a></li><li class="chapter-item expanded "><a href="user-guide/ledger/masp.html"><strong aria-hidden="true">3.4.3.</strong> MASP</a></li><li class="chapter-item expanded "><a href="user-guide/ledger/customize.html"><strong aria-hidden="true">3.4.4.</strong> Customize</a></li></ol></li><li class="chapter-item expanded "><a href="user-guide/genesis-validator-setup.html"><strong aria-hidden="true">3.5.</strong> Genesis validator setup</a></li></ol></li><li class="chapter-item expanded "><a href="testnets/index.html"><strong aria-hidden="true">4.</strong> Testnets</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="testnets/namada-close-quarters-testnet-1.html"><strong aria-hidden="true">4.1.</strong> Namada Close Quarters Testnet 1</a></li><li class="chapter-item expanded "><a href="testnets/gov-masp-devnet-1.html"><strong aria-hidden="true">4.2.</strong> MASP + Governance devnet 1</a></li></ol></li><li class="chapter-item expanded "><a href="archive/index.html"><strong aria-hidden="true">5.</strong> Archive</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="testnets/internal-testnet-1.html"><strong aria-hidden="true">5.1.</strong> Internal Testnet 1</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Anoma Docs</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/anoma/docs" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="introduction"><a class="header" href="#introduction">Introduction</a></h1>
<p>Welcome to Anoma's docs!</p>
<h2 id="about-anoma"><a class="header" href="#about-anoma">About Anoma</a></h2>
<p><a href="https://anoma.net/">Anoma</a> is a sovereign, proof-of-stake blockchain protocol that enables private, asset-agnostic cash and private bartering among any number of parties. To learn more about the protocol, we recommend the following resources:</p>
<ul>
<li><a href="https://medium.com/anomanetwork/introducing-anoma-a-blockchain-for-private-asset-agnostic-bartering-dcc47ac42d9f">Introduction to Anoma Medium article</a></li>
<li><a href="https://anoma.network/papers/whitepaper.pdf">Anoma's Whitepaper</a></li>
<li><a href="https://anoma.network/papers/vision-paper.pdf">Anoma's Vision paper</a></li>
</ul>
<h3 id="anomas-current-testnet-feigenbaum"><a class="header" href="#anomas-current-testnet-feigenbaum">Anoma's current testnet: Feigenbaum</a></h3>
<p>Feigenbaum is the name of Anoma's first public testnet. Find <code>feigenbaum</code> on <a href="https://github.com/anoma/anoma/releases">Github</a>.</p>
<blockquote>
<p>⚠️ Here lay dragons: this codebase is still experimental, try at your own risk!</p>
</blockquote>
<h3 id="the-source"><a class="header" href="#the-source">The source</a></h3>
<p>This book is written using <a href="https://rust-lang.github.io/mdBook/">mdBook</a>, it currently lives in the <a href="https://github.com/anoma/docs">Anoma docs repo</a>.</p>
<p>To get started quickly, in the <code>docs</code> directory one can:</p>
<pre><code class="language-shell"># Install dependencies
make dev-deps

# This will open the book in your default browser and rebuild on changes
make serve
</code></pre>
<p><a href="https://github.com/anoma/docs/issues">Contributions</a> to the contents and the structure of this book should be made via pull requests.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="quick-start---how-to-install-anoma-and-run-a-validator-node"><a class="header" href="#quick-start---how-to-install-anoma-and-run-a-validator-node">Quick Start - How to install Anoma and run a validator node</a></h1>
<h2 id="requirements"><a class="header" href="#requirements">Requirements</a></h2>
<ul>
<li>Building from source requires at least 16GB of ram available and 4 core cpu,</li>
<li>Free disk space of at least 60GB,</li>
<li>Intel i3 or better will suffice.</li>
<li>Tendermint 0.34.x pre-installed</li>
</ul>
<p>To install the correct version of Tendermint, download any of the pre-built binaries for versions 0.34.x <a href="https://github.com/tendermint/tendermint/releases">here</a> and install it using the instructions on the <a href="https://docs.tendermint.com/master/introduction/install.html">Tendermint guide</a>, or use a script on the Anoma repo
<code>scripts/install/get_tendermint.sh</code> This is used by the <code>make install</code> command (if you’re installing from the source).</p>
<p>At the moment we are not supporting windows.</p>
<p>This guide also assumes that the user has a basic knowledge of the terminal and how commands are used.</p>
<h2 id="about-this-guide"><a class="header" href="#about-this-guide">About this guide</a></h2>
<ul>
<li>Commands start with <code>$</code>:<br />
<code>$ this is a command do not copy the dollar sign!</code></li>
<li>Comments start with <code>#</code>:<br />
<code># this is a comment make sure you read them!</code></li>
<li>Sample outputs start with an arrow:<br />
<code>➜ this is an example command line output useful for comparing</code></li>
</ul>
<h2 id="install-anoma"><a class="header" href="#install-anoma">Install Anoma</a></h2>
<p>To pull the latest Anoma executables on Linux (at time of writing, this is <a href="https://github.com/anoma/anoma/releases/tag/v0.3.1">Anoma v.0.3.1</a>):</p>
<pre><code class="language-shell">$ curl -LO https://github.com/anoma/anoma/releases/download/v0.3.1/anoma-v0.3.1-Linux-x86_64.tar.gz

➜ 2022-01-06 22:13:01 (12.0 MB/s) - 'anoma-v0.3.1-Linux-x86_64.tar.gz' saved [25169169/25169169]
</code></pre>
<p>or on Mac:</p>
<pre><code class="language-shell">curl -LO https://github.com/anoma/anoma/releases/download/v0.3.1/anoma-v0.3.1-Darwin-x86_64.tar.gz 
</code></pre>
<p>Extract them with:</p>
<pre><code class="language-shell">tar -x -z -f anoma-v0.3.1-[platform].tar.gz
</code></pre>
<p>and change directory with:</p>
<p><code>$ cd anoma-v0.3.1-[platform]</code></p>
<p>Remember to replace <code>[platform]</code> with your platform (without brackets). This could be 'Linux-x86_64' for Linux or 'Darwin-x86_64' for Mac.</p>
<h2 id="configure"><a class="header" href="#configure">Configure</a></h2>
<p>Still in the same directory as above</p>
<pre><code class="language-shell">$ ./anomac utils join-network --chain-id=anoma-testnet-1.2.bf0181d9f7e0

➜ Downloading config release from https://github.com/heliaxdev/anoma-network-config/releases/download/anoma-testnet-1.2.bf0181d9f7e0/anoma-testnet-1.2.bf0181d9f7e0.tar.gz ...
➜ Successfully configured for chain ID anoma-testnet-1.2.bf0181d9f7e0
</code></pre>
<h2 id="run"><a class="header" href="#run">Run</a></h2>
<p>We recommend this step with tmux, as you can keep the node running without needing the terminal open permanently. If not, skip to the subsequent step.</p>
<pre><code class="language-shell">$ tmux

# inside the tmux/or not

$ ./anoma ledger

# can detach the tmux (Ctrl-B then D)
</code></pre>
<p>This should sync your node to the ledger and will take a while (depending on your computer). Subsequent commands (generating an account, etc.)  are unlikely to work until it is fully synced. Enquire the current block height with other participants to make sure you are synced in order to proceed.</p>
<h2 id="account"><a class="header" href="#account">Account</a></h2>
<p>Generate a local key on disk</p>
<pre><code class="language-shell"># first, we make a keypair and the implicit account associated with it
# anomaw address gen instead of key gen. Preferred because they both make a keypair but the former stores the implicit address for it too 

$ ./anomaw address gen --alias example-implicit

➜ Enter encryption password: 
Successfully added a key and an address with alias: &quot;example-implicit&quot;

# use it to make an established account
</code></pre>
<p>To initialize an account operator on chain under the alias &quot;example-established&quot;:</p>
<pre><code class="language-shell">$ ./anomac init-account --source example-implicit --public-key example-implicit --alias example-established

➜ Jan 06 22:22:19.864  INFO anoma_apps::cli::context: Chain ID: anoma-testnet-1.2.bf0181d9f7e0
Enter decryption password: 
Last committed epoch: 22386
Transaction added to mempool: Response { code: Ok, data: Data([]), log: Log(&quot;Mempool validation passed&quot;), hash: transaction::Hash(9193C2B2C56AAB1B081B18DA0FBBD4B26C5EF7CEE4B35812ECCB1CC1D1443C45) }
Transaction applied with result: {
  &quot;info&quot;: &quot;Transaction is valid. Gas used: 6080310; Changed keys: #atest1v4ehgw36ggmyzwp5g9prgsekgsu5y32z8ycnsvpeggcnys35gv65yvzxg3zrjwphgcu5gde4lvmstw/?, #atest1v4ehgw36ggmyzwp5g9prgsekgsu5y32z8ycnsvpeggcnys35gv65yvzxg3zrjwphgcu5gde4lvmstw/ed25519_pk; VPs result: &quot;,
  &quot;height&quot;: &quot;650627&quot;,
  &quot;hash&quot;: &quot;4FCCBCE5D4335C3A265B5CF22D5B8999451715F8146EB13194711B5EC70B612A&quot;,
  &quot;code&quot;: &quot;0&quot;,
  &quot;gas_used&quot;: &quot;6080310&quot;,
  &quot;initialized_accounts&quot;: [
    &quot;atest1v4ehgw36ggmyzwp5g9prgsekgsu5y32z8ycnsvpeggcnys35gv65yvzxg3zrjwphgcu5gde4lvmstw&quot;
  ]
}
The transaction initialized 1 new account
➜ Added alias example-established for address atest1v4ehgw36ggmyzwp5g9prgsekgsu5y32z8ycnsvpeggcnys35gv65yvzxg3zrjwphgcu5gde4lvmstw
</code></pre>
<p>Let's transfer ourselves 1000 XAN from the faucet with the same alias using:</p>
<pre><code class="language-shell">$ ./anomac transfer --source faucet --target example-established --token XAN --amount 1000 --signer example-established

➜ Jan 06 22:24:32.926  INFO anoma_apps::cli::context: Chain ID: anoma-testnet-1.2.bf0181d9f7e0
➜ Looking-up public key of atest1v4ehgw36ggmyzwp5g9prgsekgsu5y32z8ycnsvpeggcnys35gv65yvzxg3zrjwphgcu5gde4lvmstw from the ledger...
Enter decryption password: 
Last committed epoch: 22388
Transaction added to mempool: Response { code: Ok, data: Data([]), log: Log(&quot;Mempool validation passed&quot;), hash: transaction::Hash(3A5CA1790FDF5150EF1478DE1E3B2D2F7189B0E5D396176E5E5BFC7A37C58D00) }
Transaction applied with result: {
  &quot;info&quot;: &quot;Transaction is valid. Gas used: 1504228; Changed keys: #atest1v4ehgw36x3prswzxggunzv6pxqmnvdj9xvcyzvpsggeyvs3cg9qnywf589qnwvfsg5erg3fkl09rg5/balance/#atest1v4ehgw36ggmyzwp5g9prgsekgsu5y32z8ycnsvpeggcnys35gv65yvzxg3zrjwphgcu5gde4lvmstw, #atest1v4ehgw36x3prswzxggunzv6pxqmnvdj9xvcyzvpsggeyvs3cg9qnywf589qnwvfsg5erg3fkl09rg5/balance/#atest1v4ehgw36gc6yxvpjxccyzvphxycrxw2xxsuyydesxgcnjs3cg9znwv3cxgmnj32yxy6rssf5tcqjm3; VPs result:  Accepted: atest1v4ehgw36ggmyzwp5g9prgsekgsu5y32z8ycnsvpeggcnys35gv65yvzxg3zrjwphgcu5gde4lvmstw, atest1v4ehgw36gc6yxvpjxccyzvphxycrxw2xxsuyydesxgcnjs3cg9znwv3cxgmnj32yxy6rssf5tcqjm3, atest1v4ehgw36x3prswzxggunzv6pxqmnvdj9xvcyzvpsggeyvs3cg9qnywf589qnwvfsg5erg3fkl09rg5;&quot;,
  &quot;height&quot;: &quot;650706&quot;,
  &quot;hash&quot;: &quot;26AAE9D79F62EE8E62108D8D7689F4FFF12EA613AF29C7D4CDBEA999C28C6224&quot;,
  &quot;code&quot;: &quot;0&quot;,
  &quot;gas_used&quot;: &quot;1504228&quot;,
  &quot;initialized_accounts&quot;: []
}
</code></pre>
<p>To get the balance of your account &quot;example-established&quot;:</p>
<pre><code class="language-shell">./anomac balance --owner example-established
</code></pre>
<h2 id="setting-up-the-validator-node"><a class="header" href="#setting-up-the-validator-node">Setting up the validator node</a></h2>
<p>Initialize a validator account under any alias - in this example, &quot;example-validator&quot;:</p>
<pre><code class="language-shell">$ ./anomac init-validator --alias example-validator --source example-established

➜  Jan 06 22:26:29.927  INFO anoma_apps::cli::context: Chain ID: anoma-testnet-1.2.bf0181d9f7e0
Generating validator account key...
</code></pre>
<p>You will be asked to enter encryption passwords to generate a validator account key, consensus key and a staking reward account key. After entering the encryption password and a decryption password for the &quot;example-established&quot; account's key, the transaction should be added to the mempool and applied in a future block.</p>
<pre><code class="language-shell">➜ Transaction added to mempool: Response { code: Ok, data: Data([]), log: Log(&quot;Mempool validation passed&quot;), hash: transaction::Hash(F61D3D73CE7EFCC2021940A75B713C499D4942F820F6EC0F7924B70E7F2E751A) }
Transaction applied with result: {
  &quot;info&quot;: &quot;Transaction is valid. Gas used: 15139451; Changed keys: #atest1v9hx7w362pex7mmxyphkvgznw3skkefqyqszqgpqyqszqgpqyqszqgpqyqszqgpqyqszqgpqq8ylv7/validator/#atest1v4ehgw36g3prx3pjxapyvve3xvury3fkxg6nqsesxccnzw2rxdryg335xcmnysjzxdzyvd2pamfmwd/voting_power, #atest1v9hx7w362pex7mmxyphkvgznw3skkefqyqszqgpqyqszqgpqyqszqgpqyqszqgpqyqszqgpqq8ylv7/validator/#atest1v4ehgw36g3prx3pjxapyvve3xvury3fkxg6nqsesxccnzw2rxdryg335xcmnysjzxdzyvd2pamfmwd/staking_reward_address, #atest1v4ehgw36xppnjsjzx4ryxs2zgc6nx33hxpq5zve4g5u5xdjpgfz5xv2pg3ryy3zrxyenssfcxn02yg/ed25519_pk, #atest1v9hx7w362pex7mmxyphkvgznw3skkefqyqszqgpqyqszqgpqyqszqgpqyqszqgpqyqszqgpqq8ylv7/validator/#atest1v4ehgw36g3prx3pjxapyvve3xvury3fkxg6nqsesxccnzw2rxdryg335xcmnysjzxdzyvd2pamfmwd/total_deltas, #atest1v9hx7w362pex7mmxyphkvgznw3skkefqyqszqgpqyqszqgpqyqszqgpqyqszqgpqyqszqgpqq8ylv7/validator/#atest1v4ehgw36g3prx3pjxapyvve3xvury3fkxg6nqsesxccnzw2rxdryg335xcmnysjzxdzyvd2pamfmwd/state, #atest1v9hx7w362pex7mmxyphkvgznw3skkefqyqszqgpqyqszqgpqyqszqgpqyqszqgpqyqszqgpqq8ylv7/validator/#atest1v4ehgw36g3prx3pjxapyvve3xvury3fkxg6nqsesxccnzw2rxdryg335xcmnysjzxdzyvd2pamfmwd/consensus_key, #atest1v4ehgw36g3prx3pjxapyvve3xvury3fkxg6nqsesxccnzw2rxdryg335xcmnysjzxdzyvd2pamfmwd/?, #atest1v4ehgw36xppnjsjzx4ryxs2zgc6nx33hxpq5zve4g5u5xdjpgfz5xv2pg3ryy3zrxyenssfcxn02yg/?, #atest1v9hx7w362pex7mmxyphkvgznw3skkefqyqszqgpqyqszqgpqyqszqgpqyqszqgpqyqszqgpqq8ylv7/validator_set, #atest1v4ehgw36g3prx3pjxapyvve3xvury3fkxg6nqsesxccnzw2rxdryg335xcmnysjzxdzyvd2pamfmwd/ed25519_pk, #atest1v9hx7w362pex7mmxyphkvgznw3skkefqyqszqgpqyqszqgpqyqszqgpqyqszqgpqyqszqgpqq8ylv7/address_raw_hash/DB3D27BF31382E6250C06119C3FDF4672BB3DF5A; VPs result:  Accepted: atest1v9hx7w362pex7mmxyphkvgznw3skkefqyqszqgpqyqszqgpqyqszqgpqyqszqgpqyqszqgpqq8ylv7;&quot;,
  &quot;height&quot;: &quot;650779&quot;,
  &quot;hash&quot;: &quot;3B6AA8F3E6F1951E21703CABA4CCD24F82F6D5C38674041A7AAA1B7227B1E6B8&quot;,
  &quot;code&quot;: &quot;0&quot;,
  &quot;gas_used&quot;: &quot;15139451&quot;,
  &quot;initialized_accounts&quot;: [
    &quot;atest1v4ehgw36xppnjsjzx4ryxs2zgc6nx33hxpq5zve4g5u5xdjpgfz5xv2pg3ryy3zrxyenssfcxn02yg&quot;,
    &quot;atest1v4ehgw36g3prx3pjxapyvve3xvury3fkxg6nqsesxccnzw2rxdryg335xcmnysjzxdzyvd2pamfmwd&quot;
  ]
}
Added alias example-validator for address atest1v4ehgw36g3prx3pjxapyvve3xvury3fkxg6nqsesxccnzw2rxdryg335xcmnysjzxdzyvd2pamfmwd.
Added alias example-validator-rewards for address atest1v4ehgw36xppnjsjzx4ryxs2zgc6nx33hxpq5zve4g5u5xdjpgfz5xv2pg3ryy3zrxyenssfcxn02yg.

The validator's addresses and keys were stored in the wallet:
  Validator address &quot;example-validator&quot;
  Staking reward address &quot;example-validator-rewards&quot;
  Validator account key &quot;example-validator-key&quot;
  Consensus key &quot;example-validator-consensus-key&quot;
  Staking reward key &quot;example-validator-rewards-key&quot;
The ledger node has been setup to use this validator's address and consensus key.
</code></pre>
<p>Once the <code>init-validator</code> transaction is applied in the block and the on-chain generated validator's address is stored in your wallet, you MUST restart the <code>anoma ledger</code> node to start the node as a validator that you've just created.</p>
<p>When you restart the node, you might notice log message &quot;This node is not a validator&quot; from Tendermint. This is expected, because your validator doesn't yet have any stake in the <a href="./user-guide/ledger/pos.html">PoS system</a>.</p>
<p>We will now add some stake to your validator account.</p>
<p>Transfer 1000 XAN to your validator account (&quot;example-validator&quot;):</p>
<pre><code class="language-shell">$ ./anomac transfer --source example-established --target example-validator --token XAN --amount 1000

➜  Jan 06 22:28:17.624  INFO anoma_apps::cli::context: Chain ID: anoma-testnet-1.2.bf0181d9f7e0
Looking-up public key of atest1v4ehgw36ggmyzwp5g9prgsekgsu5y32z8ycnsvpeggcnys35gv65yvzxg3zrjwphgcu5gde4lvmstw from the ledger...
Enter decryption password: 
Last committed epoch: 22392
Transaction added to mempool: Response { code: Ok, data: Data([]), log: Log(&quot;Mempool validation passed&quot;), hash: transaction::Hash(7FD43C7573B4A62E24DBB6C99EE6C7A107DF01CC5F947517B91742E6324AE58D) }
Transaction applied with result: {
  &quot;info&quot;: &quot;Transaction is valid. Gas used: 1989091; Changed keys: #atest1v4ehgw36x3prswzxggunzv6pxqmnvdj9xvcyzvpsggeyvs3cg9qnywf589qnwvfsg5erg3fkl09rg5/balance/#atest1v4ehgw36g3prx3pjxapyvve3xvury3fkxg6nqsesxccnzw2rxdryg335xcmnysjzxdzyvd2pamfmwd, #atest1v4ehgw36x3prswzxggunzv6pxqmnvdj9xvcyzvpsggeyvs3cg9qnywf589qnwvfsg5erg3fkl09rg5/balance/#atest1v4ehgw36ggmyzwp5g9prgsekgsu5y32z8ycnsvpeggcnys35gv65yvzxg3zrjwphgcu5gde4lvmstw; VPs result:  Accepted: atest1v4ehgw36g3prx3pjxapyvve3xvury3fkxg6nqsesxccnzw2rxdryg335xcmnysjzxdzyvd2pamfmwd, atest1v4ehgw36ggmyzwp5g9prgsekgsu5y32z8ycnsvpeggcnys35gv65yvzxg3zrjwphgcu5gde4lvmstw, atest1v4ehgw36x3prswzxggunzv6pxqmnvdj9xvcyzvpsggeyvs3cg9qnywf589qnwvfsg5erg3fkl09rg5;&quot;,
  &quot;height&quot;: &quot;650842&quot;,
  &quot;hash&quot;: &quot;D251AAB5D4CD9471DB4E11DA09DEF0F15E2A3EC95EE0EE2C76766839FC352394&quot;,
  &quot;code&quot;: &quot;0&quot;,
  &quot;gas_used&quot;: &quot;1989091&quot;,
  &quot;initialized_accounts&quot;: []
}
</code></pre>
<p>Bond the 1000 XAN to &quot;example-validator&quot; using:</p>
<pre><code class="language-shell">$ ./anomac bond --validator example-validator --amount 1000

➜ Jan 06 22:29:08.903  INFO anoma_apps::cli::context: Chain ID: anoma-testnet-1.2.bf0181d9f7e0
Looking-up public key of atest1v4ehgw36g3prx3pjxapyvve3xvury3fkxg6nqsesxccnzw2rxdryg335xcmnysjzxdzyvd2pamfmwd from the ledger...
Enter decryption password: 
Last committed epoch: 22393
Transaction added to mempool: Response { code: Ok, data: Data([]), log: Log(&quot;Mempool validation passed&quot;), hash: transaction::Hash(2B814FE404F6F1D8C07CC3A51AA3038C193810251B9C50107B79698ED15A4EDC) }
Transaction applied with result: {
  &quot;info&quot;: &quot;Transaction is valid. Gas used: 3734939; Changed keys: #atest1v9hx7w362pex7mmxyphkvgznw3skkefqyqszqgpqyqszqgpqyqszqgpqyqszqgpqyqszqgpqq8ylv7/validator/#atest1v4ehgw36g3prx3pjxapyvve3xvury3fkxg6nqsesxccnzw2rxdryg335xcmnysjzxdzyvd2pamfmwd/total_deltas, #atest1v9hx7w362pex7mmxyphkvgznw3skkefqyqszqgpqyqszqgpqyqszqgpqyqszqgpqyqszqgpqq8ylv7/total_voting_power, #atest1v9hx7w362pex7mmxyphkvgznw3skkefqyqszqgpqyqszqgpqyqszqgpqyqszqgpqyqszqgpqq8ylv7/validator_set, #atest1v4ehgw36x3prswzxggunzv6pxqmnvdj9xvcyzvpsggeyvs3cg9qnywf589qnwvfsg5erg3fkl09rg5/balance/#atest1v4ehgw36g3prx3pjxapyvve3xvury3fkxg6nqsesxccnzw2rxdryg335xcmnysjzxdzyvd2pamfmwd, #atest1v4ehgw36x3prswzxggunzv6pxqmnvdj9xvcyzvpsggeyvs3cg9qnywf589qnwvfsg5erg3fkl09rg5/balance/#atest1v9hx7w362pex7mmxyphkvgznw3skkefqyqszqgpqyqszqgpqyqszqgpqyqszqgpqyqszqgpqq8ylv7, #atest1v9hx7w362pex7mmxyphkvgznw3skkefqyqszqgpqyqszqgpqyqszqgpqyqszqgpqyqszqgpqq8ylv7/validator/#atest1v4ehgw36g3prx3pjxapyvve3xvury3fkxg6nqsesxccnzw2rxdryg335xcmnysjzxdzyvd2pamfmwd/voting_power, #atest1v9hx7w362pex7mmxyphkvgznw3skkefqyqszqgpqyqszqgpqyqszqgpqyqszqgpqyqszqgpqq8ylv7/bond/#atest1v4ehgw36g3prx3pjxapyvve3xvury3fkxg6nqsesxccnzw2rxdryg335xcmnysjzxdzyvd2pamfmwd/#atest1v4ehgw36g3prx3pjxapyvve3xvury3fkxg6nqsesxccnzw2rxdryg335xcmnysjzxdzyvd2pamfmwd; VPs result:  Accepted: atest1v4ehgw36g3prx3pjxapyvve3xvury3fkxg6nqsesxccnzw2rxdryg335xcmnysjzxdzyvd2pamfmwd, atest1v9hx7w362pex7mmxyphkvgznw3skkefqyqszqgpqyqszqgpqyqszqgpqyqszqgpqyqszqgpqq8ylv7, atest1v4ehgw36x3prswzxggunzv6pxqmnvdj9xvcyzvpsggeyvs3cg9qnywf589qnwvfsg5erg3fkl09rg5;&quot;,
  &quot;height&quot;: &quot;650869&quot;,
  &quot;hash&quot;: &quot;14F5C67D27E2F9695EA40ABEA2DEC69F5B0FFEF5DFD7CB7D0FC397CC8A618BA8&quot;,
  &quot;code&quot;: &quot;0&quot;,
  &quot;gas_used&quot;: &quot;3734939&quot;,
  &quot;initialized_accounts&quot;: []
}
</code></pre>
<p>Check your bond:</p>
<pre><code class="language-shell">$ ./anomac bonds --validator example-validator

➜ Jan 06 22:30:42.798  INFO anoma_apps::cli::context: Chain ID: anoma-testnet-1.2.bf0181d9f7e0
Last committed epoch: 22394
Self-bonds:
  Active from epoch 22395: Δ 1000
Bonds total: 1000
</code></pre>
<p>Check the voting power - this will be 0 until the active-from epoch is reached (in this case <code>22395</code>):</p>
<pre><code class="language-shell">$ ./anomac voting-power --validator example-validator

➜ Jan 06 22:31:24.908  INFO anoma_apps::cli::context: Chain ID: anoma-testnet-1.2.bf0181d9f7e0
Last committed epoch: 22395
Validator atest1v4ehgw36g3prx3pjxapyvve3xvury3fkxg6nqsesxccnzw2rxdryg335xcmnysjzxdzyvd2pamfmwd is active, voting power: 1
Total voting power: 44
</code></pre>
<p>Note that with the above command, you can also specify <code>--epoch</code> argument to check a future epoch.</p>
<p>Congratulations, you have set up a validator node!</p>
<footer id="open-on-gh">Found a bug? <a href="https://github.com/anoma/docs/edit/main/src/quick-start.md">Edit this file on GitHub.</a></footer><div style="break-before: page; page-break-before: always;"></div><h1 id="user-guide"><a class="header" href="#user-guide">User Guide</a></h1>
<p>Welcome to Anoma user guide!</p>
<p>This guide is intended to help you find how to install, operate and interact with the Anoma ledger node, the client and the wallet.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="-install-namada"><a class="header" href="#-install-namada">💾 Install Namada</a></h1>
<blockquote>
<p>⚠️ We only support Linux or macOS (at the moment, we are not supporting Windows)</p>
</blockquote>
<h2 id="hardware-requirements"><a class="header" href="#hardware-requirements">Hardware Requirements</a></h2>
<p>This section covers the minimum and recommended hardware requirements for engaging with the Namada as a validator node.</p>
<h3 id="minimal-hardware-requirements"><a class="header" href="#minimal-hardware-requirements">Minimal Hardware Requirements</a></h3>
<table><thead><tr><th>Hardware</th><th>Minimal Specifications</th></tr></thead><tbody>
<tr><td>CPU</td><td>x86_64 or arm64 processor with at least 4 physical cores</td></tr>
<tr><td>RAM</td><td>16GB DDR4</td></tr>
<tr><td>Storage</td><td>at least 60GB SSD (NVMe SSD is recommended. HDD will be enough for localnet only)</td></tr>
</tbody></table>
<p>There are different ways to install Namada: <a href="user-guide/install.html#from-source">From Source</a>, <a href="user-guide/install.html#from-binaries">From Binaries</a>, <a href="user-guide/install.html#from-docker">From Docker</a> and <a href="user-guide/install.html#from-nix">From Nix</a>.</p>
<h3 id="from-source"><a class="header" href="#from-source">From Source</a></h3>
<p>If you'd like to install Namada from source you will have to install some dependencies first: <a href="https://www.rust-lang.org/tools/install">Rust</a>, <a href="https://git-scm.com/book/en/v2/Getting-Started-Installing-Git">Git</a>, Clang, OpenSSL and LLVM.</p>
<p>First, <a href="https://www.rust-lang.org/tools/install">install Rust</a> by following the instructions from the official page.</p>
<p>At the end of the installation, make sure that Cargo's bin directory ($HOME/.cargo/bin) is available on your PATH environment variable. You can either restart your shell or run <code>source $HOME/.cargo/env</code> to continue.</p>
<p>If you already have Rust installed, make sure you're using the latest version by running:</p>
<pre><code class="language-shell">rustup update
</code></pre>
<p>Then, install the remaining dependencies.</p>
<p><strong>Ubuntu:</strong> running the following command should install everything needed:</p>
<pre><code class="language-shell">sudo apt-get install -y make git-core libssl-dev pkg-config libclang-12-dev build-essential
</code></pre>
<p><strong>Mac:</strong> installing the Xcode command line tools should provide you with almost everything you need:</p>
<pre><code class="language-shell">xcode-select --install
</code></pre>
<p>Now, that you have all dependencies installed you can clone the source code from the <a href="https://github.com/anoma/anoma">Anoma repository</a> and build it with:</p>
<blockquote>
<p>⚠️ During internal and private testnets, checkout the latest testnet branch using <code>$ANOMA_TESTNET_BRANCH</code>.</p>
</blockquote>
<pre><code class="language-shell">git clone https://github.com/anoma/anoma.git
cd anoma 
make install
</code></pre>
<h3 id="from-binaries"><a class="header" href="#from-binaries">From Binaries</a></h3>
<blockquote>
<p>⚠️ During internal and private testnets, prebuilt binaries might not be available under our <a href="https://github.com/anoma/anoma/releases">Github releases page</a>.
We recommend you <a href="user-guide/install.html#from-source">build from source</a> from the appropriate branch or commit.</p>
</blockquote>
<p>If you'd like to install Namada from binaries you will have to install some dependencies first: <a href="https://docs.tendermint.com/master/introduction/install.html">Tendermint</a> <code>0.34.x</code> and GLIBC <code>v2.29</code> or higher.</p>
<p>Let's install Tendermint.</p>
<p>You can either follow the instructions on the <a href="https://docs.tendermint.com/master/introduction/install.html">Tendermint guide</a> or download the <code>get_tendermint.sh</code> script from the <a href="https://github.com/anoma/anoma/blob/master/scripts/install/get_tendermint.sh">Anoma repository</a> and execute it (will ask you for <code>root</code> access):</p>
<pre><code class="language-shell">curl -LO https://raw.githubusercontent.com/anoma/anoma/master/scripts/install/get_tendermint.sh
chmod +x get_tendermint.sh
./get_tendermint.sh
</code></pre>
<p>Finally, you should have GLIBC <code>v2.29</code> or higher.</p>
<p><strong>MacOS</strong>: the system-provided glibc should be recent enough.</p>
<p><strong>Ubuntu 20.04</strong>: this is installed by default and you don't have to do anything more.</p>
<p><strong>Ubuntu 18.04</strong>: glibc has <code>v2.27</code> by default which is lower than the required version to run Namada. We recommend to directly <a href="user-guide/install.html#from-source">install from source</a> or upgrade to Ubuntu 19.04, instead of updating glibc to the required version, since the latter way can be a messy and tedious task. In case, updating glibc would interest you this <a href="http://www.linuxfromscratch.org/lfs/view/9.0-systemd/chapter05/glibc.html">website</a> gives you the steps to build the package from source.</p>
<p>Now, that you have all dependencies installed you can download the latest binary release from our <a href="https://github.com/anoma/anoma/releases">releases page</a> by choosing the appropriate architecture.</p>
<blockquote>
<p>⚠️ Prebuilt binaries might not be available for a specific release or architecture, in this case you have to <a href="user-guide/install.html#from-source">build from source</a>.</p>
</blockquote>
<h2 id="from-docker"><a class="header" href="#from-docker">From Docker</a></h2>
<p>Go to <a href="https://hub.docker.com/r/heliaxdev/anoma">heliaxdev dockerhub account</a> and pull the image.</p>
<h2 id="from-nix"><a class="header" href="#from-nix">From Nix</a></h2>
<p>If you have <a href="https://nixos.org/">Nix</a>, you can get Anoma easily as a flake. For
this to work, make sure that you have Nix 2.4 or later and that you have
<code>experimental-features = nix-command flakes</code> in your <code>~/.config/nix/nix.conf</code>.</p>
<pre><code class="language-shell"># Install to user profile
nix profile install github:anoma/anoma/&lt;revision&gt;

# Run without installing
nix run github:anoma/anoma/&lt;revision&gt; -- --help

# Enter a shell where anoma executables are available
nix run github:anoma/anoma/&lt;revision&gt;
</code></pre>
<p>Set <code>&lt;revision&gt;</code> to the git tag, branch or hash you want.</p>
<p>With Nix versions older than 2.4, use this command instead:</p>
<pre><code class="language-shell">nix-env -f https://github.com/anoma/anoma/archive/&lt;revision&gt;.tar.gz -iA default
</code></pre>
<footer id="open-on-gh">Found a bug? <a href="https://github.com/anoma/docs/edit/main/src/user-guide/install.md">Edit this file on GitHub.</a></footer><div style="break-before: page; page-break-before: always;"></div><h1 id="getting-started"><a class="header" href="#getting-started">Getting started</a></h1>
<p>This guide assumes that the Anoma binaries are <a href="user-guide/./install.html">installed</a> and available on path. These are:</p>
<ul>
<li><code>anoma</code>: The main binary that can be used to interact with all the components of Anoma</li>
<li><code>anoman</code>: The ledger and intent gossiper node</li>
<li><code>anomac</code>: The client</li>
<li><code>anomaw</code>: The wallet</li>
</ul>
<p>The main binary <code>anoma</code> has sub-commands for all of the other binaries:</p>
<ul>
<li><code>anoma client = anomac</code></li>
<li><code>anoma node   = anoman</code></li>
<li><code>anoma wallet = anomaw</code></li>
</ul>
<p>To explore the command-line interface, add <code>--help</code> argument at any sub-command level to find out any possible sub-commands and/or arguments.</p>
<p>To configure your node to join the testnet, run:</p>
<pre><code class="language-shell">anoma client utils join-network --chain-id=anoma-testnet-1.2.bf0181d9f7e0
</code></pre>
<footer id="open-on-gh">Found a bug? <a href="https://github.com/anoma/docs/edit/main/src/user-guide/getting-started.md">Edit this file on GitHub.</a></footer><div style="break-before: page; page-break-before: always;"></div><h1 id="the-anoma-wallet"><a class="header" href="#the-anoma-wallet">The Anoma Wallet</a></h1>
<p>The Anoma wallet allows you to store and use addresses and keys by their alias.</p>
<p>The wallet's state is stored under <code>.anoma/{chain_id}/wallet.toml</code> (with the default <code>--base-dir</code>), which will be created for you if it doesn't already exist when you run any command that accesses the wallet. A newly created wallet will be pre-loaded with some default addresses.</p>
<p>For the ledger and intent gossip commands that use keys and addresses, you can enter their aliases as as defined in the wallet (case-sensitive).</p>
<p>By default, keys are stored encrypted (unless the <code>--unsafe-dont-encrypt</code> flag is used). Currently, the Anoma client can load the password via:</p>
<ul>
<li>file, by exporting an ENV variable called <code>ANOMA_WALLET_PASSWORD_FILE</code> with value containing the path to a file containing the password.</li>
<li>env variable, by exporting a ENV variable called <code>ANOMA_WALLET_PASSWORD</code> with value of the actual password.</li>
<li>stdin, the client will prompt for a password.</li>
</ul>
<h2 id="-keys"><a class="header" href="#-keys">🔐 Keys</a></h2>
<p>For cryptographic signatures, we currently support ed25519 keys. More will be added in future.</p>
<p>To manage keys, various sub-commands are available, see the commands <code>--help</code>:</p>
<pre><code class="language-shell">anoma wallet key
</code></pre>
<p>List all known keys:</p>
<pre><code class="language-shell">anoma wallet key list
</code></pre>
<p>Generate a new key:</p>
<pre><code class="language-shell">anoma wallet key gen --alias my-key
</code></pre>
<p>Note that this will also save an implicit address derived from this public key under the same alias. More about addresses below. This command has the same effect as <code>address gen</code>.</p>
<h2 id="-addresses"><a class="header" href="#-addresses">📇 Addresses</a></h2>
<p>All accounts in the Anoma ledger have a unique address, exactly one validity predicate and optionally any additional data in its dynamic storage sub-space.</p>
<p>There are currently 3 types of account addresses:</p>
<ul>
<li>Established: Used for accounts that allow the deployment of custom validation logic. These must be created on-chain via a transaction (see <a href="user-guide/./ledger.html#-initialize-an-account">the Ledger guide</a>). The address is generated on-chain and is not known until the transaction is applied.</li>
<li>Implicit, <em>not yet fully supported in the ledger</em>: Derived from a key, which can be used to authorize certain transactions from the account. They can be used as recipients of transactions without even when the account has not been used on-chain before.</li>
<li>Internal: Special internal accounts, such as protocol parameters account, PoS and IBC</li>
</ul>
<p>To manage addresses, similar to keys, various sub-commands are available:</p>
<pre><code class="language-shell">anoma wallet address
</code></pre>
<p>List all known addresses:</p>
<pre><code class="language-shell">anoma wallet address list
</code></pre>
<p>Generate a new implicit address:</p>
<pre><code class="language-shell">anoma wallet address gen --alias my-account
</code></pre>
<p>Note that this will also generate and save a key from which the address derived and save it under the same alias. Thus, this command has the same effect as <code>key gen</code>.</p>
<footer id="open-on-gh">Found a bug? <a href="https://github.com/anoma/docs/edit/main/src/user-guide/wallet.md">Edit this file on GitHub.</a></footer><div style="break-before: page; page-break-before: always;"></div><h1 id="the-anoma-ledger"><a class="header" href="#the-anoma-ledger">The Anoma Ledger</a></h1>
<p>To start a local Anoma ledger node, run:</p>
<pre><code class="language-shell">anoma ledger
</code></pre>
<p>Note that you need to have <a href="user-guide/./getting-started.html">joined a network</a> before you start the ledger. It throws an error if no network has been configured.</p>
<p>The node will attempt to connect to the persistent validator nodes and other peers in the network, and synchronize to the latest block.</p>
<p>By default, the ledger will store its configuration and state in the <code>.anoma</code> directory relative to the current working directory. You can use the <code>--base-dir</code> CLI global argument or <code>ANOMA_BASE_DIR</code> environment variable to change it.</p>
<p>The ledger also needs access to the built WASM files that are used in the genesis block. These files are included in release and shouldn't be modified, otherwise your node will fail with a consensus error on the genesis block. By default, these are expected to be in the <code>wasm</code> directory, relative to the current working directory. This can also be set with the <code>--wasm-dir</code> CLI global argument, <code>ANOMA_WASM_DIR</code> environment variable or the configuration file.</p>
<p>The ledger configuration is stored in <code>.anoma/{chain_id}/config.toml</code> (with
default <code>--base-dir</code>). It is created when you join the network. You can modify
that file to change the configuration of your node. All values can also be set
via environment variables. Names of the recognized environment variables are
derived from the configuration keys by: uppercase every letter of the key,
insert <code>.</code> or <code>__</code> for each nested value and prepend <code>ANOMA_</code>. For example,
option <code>p2p_pex</code> in <code>[ledger.tendermint]</code> can be set by
<code>ANOMA_LEDGER__TENDERMINT__P2P_PEX=true|false</code> or
<code>ANOMA_LEDGER.TENDERMINT.P2P_PEX=true|false</code> in the environment (Note: only the
double underscore form can be used in Bash, because Bash doesn't allow dots in
environment variable names).</p>
<h2 id="-initialize-an-account"><a class="header" href="#-initialize-an-account">📝 Initialize an account</a></h2>
<p>If you already have a key in your wallet, you can skip this step and use it in the following commands. Otherwise, generate a new key now:</p>
<pre><code class="language-shell">anoma wallet key gen --alias my-key
</code></pre>
<p>Then send a transaction to initialize the account and save its address with the alias <code>my-new-acc</code>. The <code>my-key</code> public key will be written into the account's storage for authorizing future transactions. We also sign this transaction with <code>my-key</code>.</p>
<pre><code class="language-shell">anoma client init-account \
  --alias my-new-acc \
  --public-key my-key \
  --source my-key
</code></pre>
<p>Once this transaction has been applied, the client will automatically see the new address created by the transaction and add it to your <a href="user-guide/./wallet.html">wallet</a> with the chosen alias <code>my-new-acc</code>.</p>
<p>By default, this command will use the prebuilt user validity predicate (from the <a href="https://github.com/anoma/anoma/blob/v0.5.0/wasm/wasm_source/src/vp_user.rs">vp_user</a> source). You can supply a different validity predicate with the <code>--code-path</code> argument. We'll come back to this topic and cover how to write and deploy custom validity predicates in the <a href="user-guide/ledger/customize.html#-validity-predicates">custom validity predicates section</a>.</p>
<h2 id="-token-transactions-and-queries"><a class="header" href="#-token-transactions-and-queries">💸 Token transactions and queries</a></h2>
<p>In Anoma, tokens are implemented as accounts with a token validity predicate. It checks that its total supply is preserved in any transaction that uses this token. Your wallet will be pre-loaded with some token addresses that are initialized in the genesis block.</p>
<p>You can see the tokens addresses known by the client when you query all tokens balances:</p>
<pre><code class="language-shell">anoma client balance
</code></pre>
<p>XAN is Anoma's native token. To obtain some tokens in a testnet, there is a special &quot;faucet&quot; account that allows anyone to withdraw up to 1000 of any token for a single transaction. You can find the address of this account in your wallet. To get some tokens from the faucet account:</p>
<pre><code class="language-shell">anoma client transfer \
  --source faucet \
  --target my-new-acc \
  --signer my-new-acc \
  --token XAN \
  --amount 1000
</code></pre>
<p>Note that because you don't have the key to sign a transfer from the faucet account, in the command above, we set the <code>--signer</code> explicitly to your account's address.</p>
<p>To submit a regular token transfer from your account to the <code>validator-1</code> address:</p>
<pre><code class="language-shell">anoma client transfer \
  --source my-new-acc \
  --target validator-1 \
  --token XAN \
  --amount 10
</code></pre>
<p>This command will attempt to find and use the key of the source address to sign the transaction.</p>
<p>To query token balances for a specific token and/or owner:</p>
<pre><code class="language-shell">anoma client balance --token XAN --owner my-new-acc
</code></pre>
<p>Note that for any client command that submits a transaction (<code>init-account</code>, <code>transfer</code>, <code>tx</code>, <code>update</code> and <a href="user-guide/ledger/pos.html">PoS transactions</a>), you can use the <code>--dry-run</code> flag to simulate the transaction being applied in the block, to see what its result would be.</p>
<footer id="open-on-gh">Found a bug? <a href="https://github.com/anoma/docs/edit/main/src/user-guide/ledger.md">Edit this file on GitHub.</a></footer><div style="break-before: page; page-break-before: always;"></div><h1 id="-interacting-with-the-proof-of-stake-system"><a class="header" href="#-interacting-with-the-proof-of-stake-system">🔏 Interacting with the Proof-of-Stake system</a></h1>
<p>The Anoma Proof of Stake system uses the XAN token as the staking token. It features delegation to any number of validators and customizable validator validity predicates.</p>
<p>The PoS system is implemented as an account with a validity predicate that governs the rules of the system. You can find its address in your wallet:</p>
<pre><code class="language-shell">anoma wallet address find --alias PoS
</code></pre>
<p>The system relies on the concept of epochs. An epoch is a range of consecutive blocks identified by consecutive natural numbers. Each epoch lasts a minimum duration and includes a minimum number of blocks since the beginning of the last epoch. These are defined by protocol parameters.</p>
<p>To query the current epoch:</p>
<pre><code class="language-shell">anoma client epoch
</code></pre>
<p>You can delegate to any number of validators at any time. When you delegate tokens, the delegation won't count towards the validator's stake (which in turn determines its voting power) until the beginning of epoch <code>n + 2</code> in the current epoch <code>n</code> (the literal <code>2</code> is set by PoS parameter <code>pipeline_len</code>). The delegated amount of tokens will be deducted from your account immediately, and will be credited to the PoS system's account.</p>
<p>To submit a delegation that bonds tokens from the source address to a validator with alias <code>validator-1</code>:</p>
<pre><code class="language-shell">anoma client bond \
  --source my-new-acc \
  --validator validator-1 \
  --amount 12.34
</code></pre>
<p>You can query your delegations:</p>
<pre><code class="language-shell">anoma client bonds --owner my-new-acc
</code></pre>
<p>The result of this query will inform the epoch from which your delegations will be active.</p>
<p>Because the PoS system is just an account, you can query its balance, which is the sum of all staked tokens:</p>
<pre><code class="language-shell">anoma client balance --owner PoS
</code></pre>
<p>Should a validator exhibit punishable behavior, the delegations towards this validator are also liable for slashing. Only the delegations that were active in the epoch in which the fault occurred will be slashed by the slash rate of the fault type. If any of your delegations have been slashed, this will be displayed in the <code>bonds</code> query. You can also find all the slashes applied with:</p>
<pre><code class="language-shell">anoma client slashes
</code></pre>
<p>While your tokens are being delegated, they are locked-in the PoS system and hence are not liquid until you withdraw them. To do that, you first need to send a transaction to “unbond” your tokens. You can unbond any amount, up to the sum of all your delegations to the given validator, even before they become active.</p>
<p>To submit an unbonding of a delegation of tokens from a source address to the validator:</p>
<pre><code class="language-shell">anoma client unbond \
  --source my-new-acc \
  --validator validator-1 \
  --amount 1.2
</code></pre>
<p>When you unbond tokens, you won't be able to withdraw them immediately. Instead, tokens unbonded in the epoch <code>n</code> will be withdrawable starting from the epoch <code>n + 6</code> (the literal <code>6</code> is set by PoS parameter <code>unbonding_len</code>). After you unbond some tokens, you will be able to see when you can withdraw them via <code>bonds</code> query:</p>
<pre><code class="language-shell">anoma client bonds --owner my-new-acc
</code></pre>
<p>When the chain reaches the epoch in which you can withdraw the tokens (or anytime after), you can submit a withdrawal of unbonded delegation of tokens back to your account:</p>
<pre><code class="language-shell">anoma client withdraw \
  --source my-new-acc \
  --validator validator-1
</code></pre>
<p>Upon success, the withdrawn tokens will be credited back your account and debited from the PoS system.</p>
<p>To see all validators and their voting power, you can query:</p>
<pre><code class="language-shell">anoma client voting-power
</code></pre>
<p>With this command, you can specify <code>--epoch</code> to find the voting powers at some future epoch. Note that only the voting powers for the current and the next epoch are final.</p>
<h2 id="-pos-validators"><a class="header" href="#-pos-validators">📒 PoS Validators</a></h2>
<p>To register a new validator account, run:</p>
<pre><code class="language-shell">anoma client init-validator \
  --alias my-validator \
  --source my-new-acc
</code></pre>
<p>This command will generate the keys required for running a validator:</p>
<ul>
<li>Consensus key, which is used in <a href="https://docs.tendermint.com/master/nodes/validators.html#validator-keys">signing blocks in Tendermint</a>.</li>
<li>Validator account key for signing transactions on the validator account, such as token self-bonding, unbonding and withdrawal, validator keys, validity predicate, state and metadata updates.</li>
<li>Staking reward account key for signing transactions on the staking reward accounts. More on this account below.</li>
</ul>
<p>Then, it submits a transaction to the ledger that generates two new accounts with established addresses:</p>
<ul>
<li>A validator account with the main validator address, which can be used to receive new delegations</li>
<li>A staking reward account, which will receive rewards for participation in the PoS system. In the future, the validity predicate of this account will be able to control how the rewards are to be distributed to the validator's delegators. <em>Staking rewards are not yet implemented</em>.</li>
</ul>
<p>These keys and aliases of the addresses will be saved in your wallet. Your local ledger node will also be setup to run this validator, you just have to shut it down with e.g. <code>Ctrl + C</code>, then start it again with the same command:</p>
<pre><code class="language-shell">anoma ledger
</code></pre>
<p>The ledger will then use the validator consensus key to sign blocks, should your validator account acquire enough voting power to be included in the active validator set. The size of the active validator set is limited to <code>128</code> (the limit is set by the PoS <code>max_validator_slots</code> parameter).</p>
<p>Note that the balance of XAN tokens that is in your validator account does not count towards your validator's stake and voting power:</p>
<pre><code class="language-shell">anoma client balance --owner my-validator --token XAN
</code></pre>
<p>That is, the balance of your account's address is a regular liquid balance that you can transfer using your validator account key, depending on the rules of the validator account's validity predicate. The default validity predicate allows you to transfer it with a signed transaction and/or stake it in the PoS system.</p>
<p>You can submit a self-bonding transaction of tokens from a validator account to the PoS system with:</p>
<pre><code class="language-shell">anoma client bond \
  --validator my-validator \
  --amount 3.3
</code></pre>
<p>A validator's voting power is determined by the sum of all their active self-bonds and delegations of tokens, with slashes applied, if any, divided by <code>1000</code> (PoS <code>votes_per_token</code> parameter, with the current value set to <code>10‱</code> in parts per ten thousand).</p>
<p>The same rules apply to delegations. When you self-bond tokens, the bonded amount won't count towards your validator's stake (which in turn determines your power) until the beginning of epoch <code>n + 2</code> in the current epoch <code>n</code>. The bonded amount of tokens will be deducted from the validator's account immediately and will be credited to the PoS system's account.</p>
<p>While your tokens are being self-bonded, they are locked-in the PoS system and hence are not liquid until you withdraw them. To do that, you first need to send a transaction to “unbond” your tokens. You can unbond any amount, up to the sum of all your self-bonds, even before they become active.</p>
<p>To submit an unbonding of self-bonded tokens from your validator:</p>
<pre><code class="language-shell">anoma client unbond \
  --validator my-validator \
  --amount 0.3
</code></pre>
<p>Again, when you unbond tokens, you won't be able to withdraw them immediately. Instead, tokens unbonded in the epoch <code>n</code> will be withdrawable starting from the epoch <code>n + 6</code>. After you unbond some tokens, you will be able to see when you can withdraw them via <code>bonds</code> query:</p>
<pre><code class="language-shell">anoma client bonds --validator my-validator
</code></pre>
<p>When the chain reaches the epoch in which you can withdraw the tokens (or anytime after), you can submit a withdrawal of unbonded tokens back to your validator account:</p>
<pre><code class="language-shell">anoma client withdraw --validator my-validator
</code></pre>
<footer id="open-on-gh">Found a bug? <a href="https://github.com/anoma/docs/edit/main/src/user-guide/ledger/pos.md">Edit this file on GitHub.</a></footer><div style="break-before: page; page-break-before: always;"></div><h1 id="introduction-to-governance"><a class="header" href="#introduction-to-governance">Introduction to governance</a></h1>
<p>The anoma governance mechanism gives users the possibility to upgrade the protocol dynamically.
There are two different mechanism to create a proposal:</p>
<ul>
<li>On-chain: Proposal is voted on and tallied on-chain. This can optionally include proposal code to be executed if the proposal is accepted.</li>
<li>Off-chain</li>
</ul>
<h2 id="on-chain-proposals"><a class="header" href="#on-chain-proposals">On-chain proposals</a></h2>
<h3 id="create-a-proposal"><a class="header" href="#create-a-proposal">Create a proposal</a></h3>
<p>Assuming you have an account with at least 500 NAM token (in this example we are going to use <code>my-new-acc</code>), lets get the corresponding address</p>
<pre><code class="language-shell">anoma wallet address find --alias `my-new-acc`
</code></pre>
<p>Now, we need to create a json file <code>proposal.json</code> holding the content of our proposal. Copy the below text into a json file.</p>
<pre><code class="language-json">{
    &quot;content&quot;: {
        &quot;title&quot;: &quot;Proposal title&quot;,
        &quot;authors&quot;: &quot;email@proposal.n&quot;,
        &quot;discussions-to&quot;: &quot;www.github.com/anoma/aip/1&quot;,
        &quot;created&quot;: &quot;2022-03-10T08:54:37Z&quot;,
        &quot;license&quot;: &quot;MIT&quot;,
        &quot;abstract&quot;: &quot;Ut convallis eleifend orci vel venenatis. Duis vulputate metus in lacus sollicitudin vestibulum. Suspendisse vel velit ac est consectetur feugiat nec ac urna. Ut faucibus ex nec dictum fermentum. Morbi aliquet purus at sollicitudin ultrices. Quisque viverra varius cursus. Praesent sed mauris gravida, pharetra turpis non, gravida eros. Nullam sed ex justo. Ut at placerat ipsum, sit amet rhoncus libero. Sed blandit non purus non suscipit. Phasellus sed quam nec augue bibendum bibendum ut vitae urna. Sed odio diam, ornare nec sapien eget, congue viverra enim.&quot;,
        &quot;motivation&quot;: &quot;Ut convallis eleifend orci vel venenatis. Duis vulputate metus in lacus sollicitudin vestibulum. Suspendisse vel velit ac est consectetur feugiat nec ac urna. Ut faucibus ex nec dictum fermentum. Morbi aliquet purus at sollicitudin ultrices.&quot;,
        &quot;details&quot;: &quot;Ut convallis eleifend orci vel venenatis. Duis vulputate metus in lacus sollicitudin vestibulum. Suspendisse vel velit ac est consectetur feugiat nec ac urna. Ut faucibus ex nec dictum fermentum. Morbi aliquet purus at sollicitudin ultrices. Quisque viverra varius cursus. Praesent sed mauris gravida, pharetra turpis non, gravida eros.&quot;,
        &quot;requires&quot;: &quot;2&quot;
    },
    &quot;author&quot;: &quot;TODO&quot;,
    &quot;voting_start_epoch&quot;: 3,
    &quot;voting_end_epoch&quot;: 6,
    &quot;grace_epoch&quot;: 12,
    &quot;proposal_code_path&quot;: &quot;./wasm_for_tests/tx_no_op.wasm&quot;
}
</code></pre>
<p>You should change the value of:</p>
<ul>
<li><code>Author</code> field with the address of <code>my-new-acc</code>.</li>
<li><code>voting_start_epoch</code> with future epoch (must be a multiple of 3)</li>
<li><code>voting_end_epoch</code> with an epoch greater of <code>voting_start_epoch</code>, multiple of 3.</li>
<li><code>grace_epoch</code> with an epoch greater of <code>voting_end_epoch</code> + 6</li>
<li><code>proposal_code_path</code> with the absolute path of the wasm file to execute (or remove the field completely)</li>
</ul>
<p>As soon as your <code>proposal.json</code> file is ready, you can submit the proposal with (making sure to be in the same directory as the <code>proposal.json</code> file):</p>
<pre><code class="language-shell">anoma client init-proposal --data-path proposal.json 
</code></pre>
<p>The transaction should have been accepted. You can query all the proposals with:</p>
<pre><code class="language-shell">anoma client query-proposal
</code></pre>
<p>or a single proposal with</p>
<pre><code class="language-shell">anoma client query-proposal --proposal-id 0
</code></pre>
<p>where <code>0</code> is the proposal id.</p>
<h3 id="vote-a-proposal"><a class="header" href="#vote-a-proposal">Vote a proposal</a></h3>
<p>Only validator and delegators can vote. Assuming you have a validator/delegator account (in this example we are going to use <code>validator</code>), you can send a vote with the following command:</p>
<pre><code class="language-shell">anoma client vote-proposal \
    --proposal-id 0 \
    --vote yay \
    --signer validator
</code></pre>
<p>where <code>--vote</code> can be either <code>yay</code> or <code>nay</code>.</p>
<h3 id="check-the-result"><a class="header" href="#check-the-result">Check the result</a></h3>
<p>As soon as the ledger reaches epoch definied in the json as <code>voting_end_epoch</code>, you can no longer vote. The code definied in <code>proposal_code</code> json field will be executed at the beginning of <code>grace_epoch</code> epoch. You can use the following commands to check the status of a proposal:</p>
<pre><code class="language-shell">anoma client query-proposal --proposal-id 0
</code></pre>
<p>or to just check the result:</p>
<pre><code class="language-shell">anoma client query-proposal-result --proposal-id 0
</code></pre>
<h2 id="off-chain-proposals"><a class="header" href="#off-chain-proposals">Off-chain proposals</a></h2>
<h3 id="create-proposal"><a class="header" href="#create-proposal">Create proposal</a></h3>
<p>Create the same json file as in the on-chain proposal and use the following command:</p>
<pre><code class="language-shell">anoma client init-proposal \
    --data-path proposal.json \
    --offline
</code></pre>
<p>This command will create a <code>proposal</code> file same directory where the command was launched.</p>
<h3 id="vote-proposal"><a class="header" href="#vote-proposal">Vote proposal</a></h3>
<p>To vote an offline proposal use the following command:</p>
<pre><code class="language-shell">anoma client vote-proposal --data-path proposal \
    --vote yay \
    --signer validator \
    --offline
</code></pre>
<p>This command will create a <code>proposal-vote-${address}</code> file (where address is the <code>--signer</code> address).</p>
<h3 id="tally-off-chain-proposal"><a class="header" href="#tally-off-chain-proposal">Tally off-chain proposal</a></h3>
<p>To compute the tally for an offline proposal we need to collect</p>
<ul>
<li><code>proposal</code> file (must have this name)</li>
<li>all the <code>proposal-vote-${address}</code> files</li>
</ul>
<p>All those files will have to be in a folder (lets call it <code>offline-proposal</code>).</p>
<p>Now you can use the following command:</p>
<pre><code class="language-shell">anoma client query-proposal-result \
    --offline \
    --data-path `offline-proposal`
</code></pre>
<p>which will tell you the proposal result.</p>
<footer id="open-on-gh">Found a bug? <a href="https://github.com/anoma/docs/edit/main/src/user-guide/ledger/governance.md">Edit this file on GitHub.</a></footer><div style="break-before: page; page-break-before: always;"></div><h1 id="masp"><a class="header" href="#masp">MASP</a></h1>
<h2 id="using-masp"><a class="header" href="#using-masp">Using MASP</a></h2>
<h3 id="shielded-transfers"><a class="header" href="#shielded-transfers">Shielded transfers</a></h3>
<p>Shielded balances are owned by a particular spending key.</p>
<p>To try out shielded transfers, you will first need an ordinary
transparent account with some token balance. Example commands for that:</p>
<pre><code class="language-shell">anomaw address gen --alias my-implicit

anomac init-account \
    --source my-implicit \
    --public-key my-implicit \
    --alias my-established

anomac transfer \
    --token btc \
    --amount 1000 \
    --source faucet \
    --target my-established \
    --signer my-established
</code></pre>
<p>The testnet tokens which the faucet can provide you are named <code>XAN</code>,
<code>BTC</code>, <code>ETH</code>, <code>DOT</code>, <code>Schnitzel</code>, <code>Apfel</code>, and <code>Kartoffel</code>. The faucet
will transfer these in increments of 1000 at a time.</p>
<p>Once you have an ordinary transparent account with some tokens, you
should generate a spending key to hold your shielded balances. You
can randomly generate one with e.g. <code>anomaw masp gen-key --alias [your spending key alias]</code>.
This command will also generate a corresponding viewing key sharing
the same alias.</p>
<p>Shielded transfers work with the <code>anomac transfer</code> command. <code>--source</code>
can be supplied with a spending key alias to spend a shielded balance, but
if you are following along, you don't have a shielded balance to spend yet.
<code>--target</code> can be supplied with a shielded payment address to create a shielded
balance.</p>
<p>To create a payment address from your spending key, use:</p>
<pre><code class="language-shell">anomaw masp gen-addr \
    --key [your viewing key alias] \
    --alias [your payment address alias]
</code></pre>
<p>This will generate a different payment address each time you run it.
Payment addresses can be reused or discarded as you like, and can't be
correlated with one another.</p>
<p>Once you have a payment address, transfer a balance from your
transparent account to your shielded spending key with something like:</p>
<pre><code class="language-shell">anomac transfer \
    --source my-established \
    --target [your payment address alias] \
    --token btc \
    --amount 100
</code></pre>
<p>Once this transfer goes through, you can view your viewing key's
balance:</p>
<pre><code class="language-shell">anomac balance --owner [your viewing key alias]
</code></pre>
<p>Now that you have a shielded balance, it can either be transferred to a
different shielded payment address (shielded to shielded):</p>
<pre><code class="language-shell">anomac transfer \
    --source [your spending key] \
    --target [someone's payment address] \
    --token btc \
    --amount 50 \
    --signer my-established
</code></pre>
<p>or to a transparent account (shielded to transparent):</p>
<pre><code class="language-shell">anomac transfer \
    --source [your spending key] \
    --target [some transparent account] \
    --token btc \
    --amount 50 \
    --signer my-established
</code></pre>
<p>Note that for the second last type of transfer, <code>--signer</code> must be
specified. However, any transparent account can sign these transactions.</p>
<h2 id="troubleshooting"><a class="header" href="#troubleshooting">Troubleshooting</a></h2>
<h3 id="setup-the-masp-parameters"><a class="header" href="#setup-the-masp-parameters">Setup the MASP parameters</a></h3>
<p>Namada uses a multi-asset shielded pool (MASP) to enable private transfers. The pool relies on three circuits which require each individually their randomly generated parameters to work.</p>
<blockquote>
<p>⚠️ Normally, the parameters are downloaded through the <code>masp</code> crate by the client, but in case of troubles you should get them from someone in the team and follow the instructions below.</p>
</blockquote>
<!-- You can download the parameters with:
```bash
[command]
``` -->
<p>The parameters need to be extracted to the correct folder where the node will read the parameters from.</p>
<h4 id="ubuntu"><a class="header" href="#ubuntu">Ubuntu</a></h4>
<pre><code class="language-shell">mkdir ~/.masp-params
tar -xvf masp-params.tar.gz ~/.masp-params
</code></pre>
<h4 id="mac"><a class="header" href="#mac">Mac</a></h4>
<pre><code class="language-shell">mkdir ~/Library/Application\ Support/MASPParams/
tar -xvf masp-params.tar.gz ~/Library/Application\ Support/MASPParams/
</code></pre>
<footer id="open-on-gh">Found a bug? <a href="https://github.com/anoma/docs/edit/main/src/user-guide/ledger/masp.md">Edit this file on GitHub.</a></footer><div style="break-before: page; page-break-before: always;"></div><h1 id="customize-accounts-and-transactions"><a class="header" href="#customize-accounts-and-transactions">Customize accounts and transactions</a></h1>
<p>On this page, we'll cover how to tailor your account(s) to your use-case with custom-made validity predicates and transactions.</p>
<p>We currently only support Rust for custom validity predicates and transactions via WASM, but expect many more options to be available in the future!</p>
<h2 id="-anoma-accounts-primer"><a class="header" href="#-anoma-accounts-primer">👩🏽‍🏫 Anoma accounts primer</a></h2>
<p>Instead of the common smart contract design, in Anoma, all the accounts follow the same basic principles. Each account has exactly one validity predicate. Any transaction that attempts to make some storage modifications will trigger validity predicates of each account whose storage has been modified by it. Validity predicates are stateless functions that decide if an account accepts the transaction.</p>
<p>Every account also has its dedicated key-value storage. The ledger encodes agnostic, it allows you to use the encoding of your preference for the storage values. Internally and for the pre-built validity predicates and transactions, we use <a href="https://github.com/near/borsh-rs">Borsh</a>, which allows you to simply derive the encoding from your data types. The storage keys are <code>/</code> separated path segments, where the first segment is always the address of the account to which the storage key belongs. In storage keys, addresses use a reserved prefix <code>#</code>.</p>
<p>To illustrate with an example storage key used for fungible tokens (with addresses shortened for clarity), let's say:</p>
<ul>
<li>
<p>XAN token's address is <code>atest1v4ehgw36x3prs...</code></p>
</li>
<li>
<p>A user Bertha has address <code>atest1v4ehgw36xvcyyv...</code></p>
</li>
<li>
<p>Then, the balance of Bertha's XAN tokens is stored in the XAN account, with the storage key comprised of <code>#{token}/balance/#{owner}</code>, i.e.:</p>
<pre><code class="language-text">#atest1v4ehgw36x3prs.../balance/#atest1v4ehgw36xvcyy...
</code></pre>
</li>
</ul>
<p>Any transaction can attempt to make changes to the storage of any account(s). Only if all the involved accounts accept, the transaction will it be committed. Otherwise, the transaction is rejected and its modifications discarded.</p>
<p>This approach allows multiparty transactions to be applied atomically, without any a priority coordination. It also gives accounts complete and fine-grained control over how they can be used in transactions in themselves and in relation to other accounts.</p>
<p>In fact, most of the functionality in the Anoma ledger is being built leveraging the simplicity and flexibility of this account system, from a simple fungible token to more complex accounts that integrate the Inter-blockchain Communication protocol and the Proof of Stake system.</p>
<h2 id="-validity-predicates"><a class="header" href="#-validity-predicates">☑ Validity predicates</a></h2>
<p>A custom validity predicates can be built from scratch using <code>vp_template</code> (from root directory <a href="https://github.com/anoma/anoma/tree/v0.5.0/wasm/vp_template"><code>wasm/vp_template</code></a>), which is Rust code compiled to WASM. Consult its <code>README.md</code> to find out more.</p>
<p>You can also check out the pre-built validity predicates' source code in the <a href="https://github.com/anoma/anoma/tree/v0.5.0/wasm/wasm_source"><code>wasm/wasm_source</code></a>, where each sub-module that begins with <code>vp_</code> implements a validity predicate. For example the <a href="https://github.com/anoma/anoma/blob/v0.5.0/wasm/wasm_source/src/vp_user.rs"><code>vp_user</code></a> is the default validity predicate used for established accounts (created with <code>init-account</code> command).</p>
<p>A validity predicate's must contain the following function:</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use anoma_vm_env::vp_prelude::*;

#[validity_predicate]
fn validate_tx(
    // The data attached to the transaction
    tx_data: Vec&lt;u8&gt;,
    // The address of the account where this validity predicate is used
    addr: Address,
    // The storage keys that were modified by the transaction
    keys_changed: BTreeSet&lt;storage::Key&gt;,
    // The addresses of all the accounts that are verifying the current 
    // transaction
    verifiers: BTreeSet&lt;Address&gt;,
) -&gt; bool {
  // Returning `true` allows any key change
  true
}
<span class="boring">}
</span></code></pre></pre>
<p>You can think of it as its <code>main</code> function. When this VP is deployed to an account, this function will be called for every transaction that:</p>
<ul>
<li>Modifies a storage key that contains the account's address to which the validity predicate belongs</li>
<li>Inserts the account's address into the verifier set with <a href="https://docs.anoma.net/v0.5.0/rustdoc/anoma_vm_env/imports/tx/fn.insert_verifier.html"><code>tx_prelude::insert_verifiers</code> function</a></li>
</ul>
<p>Inside the validity predicate function, you can read any storage value with the functions provided in the <code>vp_prelude</code> from the storage prior to the transaction (functions with name suffix <code>_pre</code>) and from the storage state after the transaction is applied (suffixed with <code>_post</code>).</p>
<p>To find out about the host interface available in a validity predicate, please check out <a href="https://docs.anoma.net/v0.5.0/rustdoc/anoma_vm_env/vp_prelude/index.html">Rust docs for <code>vp_prelude</code></a>.</p>
<p>To compile the validity predicate's code from the template:</p>
<pre><code class="language-shell">make -C wasm/vp_template
</code></pre>
<p>This will output a WASM file that can be found in <code>wasm/vp_template/target/wasm32-unknown-unknown/release/vp_template.wasm</code>.</p>
<p>You can, for example, copy it into your <code>wasm</code> directory (the default directory used by the ledger's node and the client, which can be changed with <code>--wasm-dir</code> global argument or <code>ANOMA_WASM_DIR</code>):</p>
<pre><code class="language-shell">cp \
  wasm/vp_template/target/wasm32-unknown-unknown/release/vp_template.wasm \
  wasm/my_vp.wasm
</code></pre>
<p>To submit a transaction that updates an account's validity predicate:</p>
<pre><code class="language-shell">anoma client update --address my-new-acc --code-path my_vp.wasm
</code></pre>
<h2 id="-custom-transactions"><a class="header" href="#-custom-transactions">📩 Custom transactions</a></h2>
<p>A transaction must contain a WASM code that can perform arbitrary storage changes. It can also contain arbitrary data, which will be passed onto the transaction and validity predicates when the transaction is being applied.</p>
<p>A custom transaction can be built from scratch using <code>tx_template</code> (from root directory <a href="https://github.com/anoma/anoma/tree/v0.5.0/wasm/tx_template"><code>wasm/tx_template</code></a>), which is Rust code compiled to WASM. Consult its <code>README.md</code> to find out more.</p>
<p>For some inspiration, check out the pre-built transactions source code in the <a href="https://github.com/anoma/anoma/tree/v0.5.0/wasm/wasm_source"><code>wasm/wasm_source</code></a>, where each sub-module that begins with <code>tx_</code> implements a transaction.</p>
<p>A transaction code must contain the following function, which will be called when the transaction is being applied:</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use anoma_vm_env::tx_prelude::*;

#[transaction]
fn apply_tx(tx_data: Vec&lt;u8&gt;) {
  // Do anything here
}
<span class="boring">}
</span></code></pre></pre>
<p>Inside the validity predicate function, you can read, write or delete any storage value with the functions provided in the <code>tx_prelude</code> from the storage of any account.</p>
<p>To find out about the interface available in a transaction, please check out <a href="https://docs.anoma.net/v0.5.0/rustdoc/anoma_vm_env/tx_prelude/index.html">Rust docs for <code>tx_prelude</code></a>.</p>
<p>Compile the transaction's code from the template:</p>
<pre><code class="language-shell">make -C wasm/tx_template
</code></pre>
<p>This will output a WASM file that can be found in <code>wasm/tx_template/target/wasm32-unknown-unknown/release/tx_template.wasm</code>.</p>
<p>Submit the transaction to the ledger:</p>
<pre><code class="language-shell">anoma client tx --code-path tx_template/tx.wasm
</code></pre>
<p>Optionally, you can also attach some data to the transaction from a file with the <code>--data-path</code> argument.</p>
<footer id="open-on-gh">Found a bug? <a href="https://github.com/anoma/docs/edit/main/src/user-guide/ledger/customize.md">Edit this file on GitHub.</a></footer><div style="break-before: page; page-break-before: always;"></div><h1 id="genesis-validator-setup"><a class="header" href="#genesis-validator-setup">Genesis validator setup</a></h1>
<h2 id="pre-genesis"><a class="header" href="#pre-genesis">Pre-genesis</a></h2>
<p>To setup all the <a href="user-guide/genesis-validator-setup.html#required-keys">required keys</a> for a genesis validator for an upcoming network, you can execute the following command with an alias of your choice. Note that this alias is public (the address of your validator account will be visible in every wallet) and must be unique within the network.</p>
<p>You must also provide a static <code>{IP:port}</code> to the <code>--net-address</code> argument of your future node's P2P address.</p>
<pre><code class="language-shell">export ALIAS=&quot;1337-validator&quot;
anoma client utils init-genesis-validator \
    --alias $ALIAS \
    --net-address 1.2.3.4:26656
</code></pre>
<p>After generating your keys, the command will print something like this:</p>
<pre><code class="language-shell">Pre-genesis TOML written to .anoma/pre-genesis/1337-validator/validator.toml
</code></pre>
<p>This file is the public configuration of your validator. You can safely share this file with the network's organizer, who is responsible for setting up and publishing the finalized genesis file and Anoma configuration for the chain.</p>
<p>Note that the wallet containing your private keys will also be written into this directory.</p>
<h2 id="after-network-config-release"><a class="header" href="#after-network-config-release">After network config release</a></h2>
<p>Once the network is finalized, a new chain ID will be created and released on <a href="https://github.com/heliaxdev/anoma-network-config/releases">anoma-network-config/releases</a> (a custom configs URL can be used instead with <code>ANOMA_NETWORK_CONFIGS_SERVER</code> env var). You can use it to setup your genesis validator node for the <code>--chain-id</code> argument in the command below.</p>
<pre><code class="language-shell">anoma client utils join-network \
    --chain-id $CHAIN_ID \
    --genesis-validator $ALIAS
</code></pre>
<p>This command will use your pre-genesis wallet for the given chain and take care of setting up Anoma with Tendermint.</p>
<p>If you run this command in the same directory that you ran <code>anoma client utils init-genesis-validator</code>, it should find the pre-genesis wallet for you, otherwise you can pass the path to the pre-genesis directory using <code>--pre-genesis-path</code>. e.g.</p>
<pre><code class="language-shell">anoma client utils join-network \
    --chain-id $CHAIN_ID \
    --pre-genesis-path workspace/.anoma/pre-genesis/$ALIAS
</code></pre>
<p>Once setup, you can start the ledger as usual with e.g.:</p>
<pre><code class="language-shell">anoma ledger
</code></pre>
<h2 id="required-keys"><a class="header" href="#required-keys">Required keys</a></h2>
<ul>
<li>Account key: Can be used to sign transactions that require authorization in the default validator validity predicate, such as a balance transfer.</li>
<li>Staking rewards key: Can be used to sign transactions on the PoS staking rewards account.</li>
<li>Protocol key: This key is used by the validator's ledger itself to sign protocol transaction on behalf of the validator.</li>
<li>DKG key: Special key needed for participation in the DKG protocol</li>
<li>Consensus key: Used in Tendermint consensus layer. Currently, this key is written to a file which is read by Tendermint.</li>
<li>Tendermint node key: This key is used to derive Tendermint node ID for P2P connection authentication. This key is also written to a file which is read by Tendermint.</li>
</ul>
<footer id="open-on-gh">Found a bug? <a href="https://github.com/anoma/docs/edit/main/src/user-guide/genesis-validator-setup.md">Edit this file on GitHub.</a></footer><div style="break-before: page; page-break-before: always;"></div><h1 id="testnets"><a class="header" href="#testnets">Testnets</a></h1>
<p>This section describes how to connect to the various testnets and to test selected features.</p>
<ul>
<li>Connect to <a href="testnets/internal-testnet-1.html">Internal Testnet 1</a> and try MASP commands</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="namada-close-quarters-testnet-1"><a class="header" href="#namada-close-quarters-testnet-1">Namada Close Quarters Testnet 1</a></h1>
<p>This testnet introduces the following new features:</p>
<ul>
<li><a href="testnets/../user-guide/ledger/governance.html">on-chain governance</a> - create and vote for proposals both onchain and offchain</li>
<li><a href="testnets/../user-guide/ledger/masp.html">MASP (multi-asset shielded pool) transfers</a> - make private transfers of any Namada token</li>
</ul>
<p>Future testnets will include more features as described in <a href="https://specs.anoma.net/master/architecture/namada.html">the Namada spec</a>, like IBC (inter-blockchain communication protocol), bridging to the Ethereum blockchain and more.</p>
<h2 id="status"><a class="header" href="#status">Status</a></h2>
<ul>
<li>2022-05-05: The chain has been setup to start today at 12:00 CET.</li>
<li>2022-05-02: We are currently preparing to launch the chain. Applications are open for people to be genesis validators.</li>
</ul>
<h2 id="chain-information"><a class="header" href="#chain-information">Chain information</a></h2>
<p>Chain ID: <code>namada-cq-1.9c81b94e47e462ce8c</code></p>
<p>You will need to compile the binaries from source yourself, make sure you have checked out the specific commit <code>f1afdffd5e43ad4bb448db7bf5bc1e23464350f7</code> to build from, then follow <a href="testnets/../user-guide/install.html#from-source">the building from source guide</a>.</p>
<h2 id="applying-to-be-a-genesis-validator"><a class="header" href="#applying-to-be-a-genesis-validator">Applying to be a genesis validator</a></h2>
<h3 id="prerequisites"><a class="header" href="#prerequisites">Prerequisites</a></h3>
<ul>
<li>a machine that meets the <a href="testnets/../user-guide/install.html#hardware-requirements">requirements</a> for running a validator node</li>
<li>an associated public IPv4 address with ports 26656 reachable from anywhere for P2P connections</li>
</ul>
<h3 id="set-up"><a class="header" href="#set-up">Set up</a></h3>
<p>Follow <a href="testnets/../user-guide/genesis-validator-setup.html#pre-genesis">this guide</a> on how to generate your &quot;pre-genesis&quot; validator files.</p>
<p>After this, you'll have a <code>validator.toml</code> file, the contents of which will look something like the following:</p>
<pre><code class="language-toml">[validator.1337-validator]
consensus_public_key = &quot;00056fff5232da385d88428ca2bb2012a4d83cdf5c697864dde34b393333a72268&quot;
account_public_key = &quot;00f1bd321be2e23b9503653dd50fcd5177ca43a0ade6da60108eaecde0d68abdc8&quot;
staking_reward_public_key = &quot;005725f952115838590fc7c5dd9590bc054ac4bd5af55672a40df4ac7dca50ce97&quot;
protocol_public_key = &quot;0054c213d2f8fe2dd3fc5a41a52fd2839cb49643d960d7f75e993202692c5d8783&quot;
dkg_public_key = &quot;6000000054eafa7320ddebf00c9487e5f7ea5107a8444f042b74caf9ed5679163f854577bf4d0992a8fd301ec4f3438c9934c617a2c71649178e536f7e2a8cdc1f8331139b7fd9b4d36861f0a9915d83f61d7f969219f0eba95bb6fa45595425923d4c0e&quot;
net_address = &quot;1.2.3.4:26656&quot;
tendermint_node_key = &quot;00e1a8fe1abceb700063ab4558baec680b64247e2fd9891962af552b9e49318d8d&quot;
</code></pre>
<p>This file contains only public information and is safe to share publicly. If you want to be a genesis validator for this testnet, please make a pull request to <a href="https://github.com/anoma/namada-testnets">https://github.com/anoma/namada-testnets</a> adding your <code>validator.toml</code> file to the <code>namada-close-quarters-testnet-1/</code> directory, renaming it to <code>$alias.toml</code>. e.g. if you chose your alias to be &quot;bertha&quot;, submit the file with the name <code>bertha.toml</code>. You can see what an example PR looks like <a href="https://github.com/anoma/namada-testnets/pull/1">here</a>.</p>
<footer id="open-on-gh">Found a bug? <a href="https://github.com/anoma/docs/edit/main/src/testnets/namada-close-quarters-testnet-1.md">Edit this file on GitHub.</a></footer><div style="break-before: page; page-break-before: always;"></div><h1 id="masp--governance-devnet"><a class="header" href="#masp--governance-devnet">MASP + Governance devnet</a></h1>
<p>This devnet contains the following new features:</p>
<ul>
<li><a href="testnets/../user-guide/ledger/governance.html">on-chain governance</a> - create and vote for proposals both onchain and offchain</li>
<li><a href="testnets/../user-guide/ledger/masp.html">MASP (multi-asset shielded pool) transfers</a> - make private transfers of any Namada token</li>
</ul>
<p>Latest values regarding the testnet that would be useful to have in your shell:</p>
<pre><code class="language-shell">export ANOMA_TESTNET_CHAIN_ID='anoma-gov-masp.3f1b25f2ee35b2e'
export ANOMA_TESTNET_COMMIT='f1afdffd5e43ad4bb448db7bf5bc1e23464350f7'
</code></pre>
<p>You can install Namada by following the instructions from the <a href="testnets/../user-guide/install.html">Install User Guide</a>. Note that the binaries should be built from <code>$ANOMA_TESTNET_COMMIT</code> rather than <code>master</code> or a release tag like <code>v0.5.0</code>.</p>
<footer id="open-on-gh">Found a bug? <a href="https://github.com/anoma/docs/edit/main/src/testnets/gov-masp-devnet-1.md">Edit this file on GitHub.</a></footer><div style="break-before: page; page-break-before: always;"></div><h1 id="archive"><a class="header" href="#archive">Archive</a></h1>
<p>The archive contains deprecated pages.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="internal-testnet-1"><a class="header" href="#internal-testnet-1">Internal Testnet 1</a></h1>
<blockquote>
<p>⚠️ the values below might change frequently.</p>
</blockquote>
<p>Latest values regarding the testnet that would be useful to have in your shell:</p>
<pre><code class="language-shell">export ANOMA_TESTNET_CHAIN_ID='anoma-masp-0.3.51d2f83a8412b95'
export ANOMA_TESTNET_BRANCH='internal/testnet-n1'
export ANOMA_TESTNET_COMMIT='0184e64e044366ec370d1431ddf4691b4bd3a5b4'
</code></pre>
<h2 id="installing-namada"><a class="header" href="#installing-namada">Installing Namada</a></h2>
<p>You can install Namada by following the instructions from the <a href="testnets/../user-guide/install.html">Install User Guide</a>. Note that the binaries should be built from <code>$ANOMA_TESTNET_BRANCH</code> rather than <code>master</code> or a release tag like <code>v0.5.0</code>.</p>
<h2 id="setting-up-namada"><a class="header" href="#setting-up-namada">Setting up Namada</a></h2>
<p>At this point, depending on your installation choice, we will assume that the <code>anoma</code> binaries are available on path and built from the latest testnet branch.</p>
<h3 id="join-a-network"><a class="header" href="#join-a-network">Join a network</a></h3>
<p>To join the current testnet, you need to download the configuration files. This can be done easily with:</p>
<pre><code class="language-shell">anomac utils join-network --chain-id $ANOMA_TESTNET_CHAIN_ID
</code></pre>
<p>It should output something like this where the chain id might differ:</p>
<pre><code class="language-shell">Downloading config release from https://github.com/heliaxdev/anoma-network-config/releases/download/anoma-masp-0.3.51d2f83a8412b95/anoma-masp-0.3.51d2f83a8412b95.tar.gz ...
Successfully configured for chain ID anoma-masp-0.3.51d2f83a8412b9`
</code></pre>
<p>The above command downloads the folder <code>.anoma</code> which contains a global config file <code>global-config.toml</code>; the genesis file for the specified chain id <code>{chain-id}.toml</code> and its corresponding configuration folder <code>{chain-id}</code> which contains the checksums for the wasm files under <code>wasm</code> and the p2p config <code>config.toml</code>.</p>
<h3 id="setup-the-masp-parameters-1"><a class="header" href="#setup-the-masp-parameters-1">Setup the MASP parameters</a></h3>
<p>Namada uses a multi-asset shielded pool (MASP) to enable private transfers. The pool relies on three circuits which require each individually their randomly generated parameters to work.</p>
<blockquote>
<p>⚠️ Normally, the parameters are downloaded through the <code>masp</code> crate by the client, but in case of troubles you should get them from someone in the team and follow the instructions below.</p>
</blockquote>
<!-- You can download the parameters with:
```shell
[command]
``` -->
<p>The parameters need to be extracted to the correct folder where the node will read the parameters from.</p>
<p><strong>Ubuntu</strong></p>
<pre><code class="language-shell">mkdir ~/.masp-params
tar -xvf masp-params.tar.gz ~/.masp-params
</code></pre>
<p><strong>Mac</strong></p>
<pre><code class="language-shell">mkdir ~/Library/Application\ Support/MASPParams/
tar -xvf masp-params.tar.gz ~/Library/Application\ Support/MASPParams/
</code></pre>
<h3 id="start-a-node"><a class="header" href="#start-a-node">Start a node</a></h3>
<p>At this point, you are ready to start your Namada node with:</p>
<pre><code class="language-shell">anoma ledger
</code></pre>
<p>To keep your node running after closing your terminal, you can optionally use a terminal multiplexer like <code>tmux</code>.</p>
<h2 id="using-namada"><a class="header" href="#using-namada">Using Namada</a></h2>
<h3 id="shielded-transfers-1"><a class="header" href="#shielded-transfers-1">Shielded transfers</a></h3>
<p>Shielded balances are owned by a particular spending key. In this
testnet, spending keys are just arbitrary hexadecimal strings, provided
on the command line.</p>
<p>To try out shielded transfers, you will first need an ordinary
transparent account with some token balance. Example commands for that:</p>
<pre><code>anomaw address gen --alias my-implicit
anomac init-account --source my-implicit --public-key my-implicit --alias my-established
anomac transfer --token btc --amount 1000 --source faucet --target my-established --signer my-established
</code></pre>
<p>The testnet tokens which the faucet can provide you are named <code>XAN</code>,
<code>BTC</code>, <code>ETH</code>, <code>DOT</code>, <code>Schnitzel</code>, <code>Apfel</code>, and <code>Kartoffel</code>. The faucet
will transfer these in increments of 1000 at a time.</p>
<p>Once you have an ordinary transparent account with some tokens, you
should select a spending key to hold your shielded balances. This is
just some hexadecimal string, like <code>1234</code>, <code>abcd</code>, or
<code>030cdcc0a43765d4645e22adbf9944b58c646d162c9a08890a08cc49a9580c9e</code>. Try
to select one that is unique to you (i.e., probably don't use <code>1234</code>);
you could randomly generate one with e.g. <code>openssl rand -hex 32</code>. The
wallet does not yet support spending keys, so make a note of yours
somewhere.</p>
<p>Shielded transfers work with the <code>anomac transfer</code> command, but either
<code>--source</code>, <code>--target</code>, or both are replaced. <code>--source</code> may be replaced
with <code>--spending-key</code> to spend a shielded balance, but if you are
following along, you don't have a shielded balance to spend yet.
<code>--target</code> may be replaced with <code>--payment-address</code> to create a shielded
balance.</p>
<p>To create a payment address from your spending key, use:</p>
<pre><code class="language-shell">anomaw masp gen-payment-addr --spending-key [your spending key]
</code></pre>
<p>This will generate a different payment address each time you run it.
Payment addresses can be reused or discarded as you like, and can't be
correlated with one another.</p>
<p>Once you have a payment address, transfer a balance from your
transparent account to your shielded spending key with something like:</p>
<pre><code class="language-shell">anomac transfer --source my-established --payment-address [your payment address] --token btc --amount 100
</code></pre>
<p>Once this transfer goes through, you can view your spending key's
balance:</p>
<pre><code class="language-shell">anomac balance --spending-key [your spending key]
</code></pre>
<p>However, your spending key is the secret key to all your shielded
balances, and you may not want to use it just to view balances. For this
purpose, you can derive the viewing key:</p>
<pre><code class="language-shell">anomaw masp derive-view-key --spending-key [your spending key]
anomac balance --viewing-key [your viewing key]
</code></pre>
<p>The viewing key can also be used to generate payment addresses, with
e.g. <code>anomaw masp gen-payment-addr --viewing-key [your viewing key]</code>.</p>
<p>Now that you have a shielded balance, it can either be transferred to a
different shielded payment address (shielded to shielded):</p>
<pre><code class="language-shell">anomac transfer --spending-key [your spending key] --payment-address [someone's payment address] --token btc --amount 50 --signer my-established
</code></pre>
<p>or to a transparent account (shielded to transparent):</p>
<pre><code class="language-shell">anomac transfer --spending-key [your spending key] --target [some transparent account] --token btc --amount 50 --signer my-established
</code></pre>
<p>Note that for both of these types of transfer, <code>--signer</code> must be
specified. However, any transparent account can sign these transactions.</p>
<h2 id="troubleshooting-1"><a class="header" href="#troubleshooting-1">Troubleshooting</a></h2>
<h3 id="build-from-source"><a class="header" href="#build-from-source">Build from Source</a></h3>
<p>Build the provided validity predicate, transaction and matchmaker wasm modules</p>
<pre><code class="language-shell">make build-wasm-scripts-docker
</code></pre>
<h3 id="node-is-not-starting"><a class="header" href="#node-is-not-starting">Node is not starting</a></h3>
<p><strong>&quot;No state could be found&quot;</strong></p>
<p>If you get the following log, it means that Tendermint is not installed properly on your machine or not available on path. To solve this issue, install Tendermint by following the <a href="testnets/../user-guide/install.html">Install User Guide</a>.</p>
<pre><code class="language-shell">2022-03-30T07:21:09.212187Z  INFO anoma_apps::cli::context: Chain ID: anoma-masp-0.3.51d2f83a8412b95
2022-03-30T07:21:09.213968Z  INFO anoma_apps::node::ledger: Available logical cores: 8
2022-03-30T07:21:09.213989Z  INFO anoma_apps::node::ledger: Using 4 threads for Rayon.
2022-03-30T07:21:09.213994Z  INFO anoma_apps::node::ledger: Using 4 threads for Tokio.
2022-03-30T07:21:09.217867Z  INFO anoma_apps::node::ledger: VP WASM compilation cache size not configured, using 1/6 of available memory.
2022-03-30T07:21:09.218908Z  INFO anoma_apps::node::ledger: Available memory: 15.18 GiB
2022-03-30T07:21:09.218934Z  INFO anoma_apps::node::ledger: VP WASM compilation cache size: 2.53 GiB
2022-03-30T07:21:09.218943Z  INFO anoma_apps::node::ledger: Tx WASM compilation cache size not configured, using 1/6 of available memory.
2022-03-30T07:21:09.218947Z  INFO anoma_apps::node::ledger: Tx WASM compilation cache size: 2.53 GiB
2022-03-30T07:21:09.218954Z  INFO anoma_apps::node::ledger: Block cache size not configured, using 1/3 of available memory.
2022-03-30T07:21:09.218959Z  INFO anoma_apps::node::ledger: RocksDB block cache size: 5.06 GiB
2022-03-30T07:21:09.218996Z  INFO anoma_apps::node::ledger::storage::rocksdb: Using 2 compactions threads for RocksDB.
2022-03-30T07:21:09.219196Z  INFO anoma_apps::node::ledger: Tendermint node is no longer running.
2022-03-30T07:21:09.232544Z  INFO anoma::ledger::storage: No state could be found
2022-03-30T07:21:09.232709Z  INFO anoma_apps::node::ledger: Tendermint has exited, shutting down...
2022-03-30T07:21:09.232794Z  INFO anoma_apps::node::ledger: Anoma ledger node started.
2022-03-30T07:21:09.232849Z  INFO anoma_apps::node::ledger: Anoma ledger node has shut down.
</code></pre>
<footer id="open-on-gh">Found a bug? <a href="https://github.com/anoma/docs/edit/main/src/testnets/internal-testnet-1.md">Edit this file on GitHub.</a></footer>
                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>




        <script type="text/javascript">
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->

        <script type="text/javascript">
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>

    </body>
</html>
